<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>To Lin</title>
    <style>
      /* --- GLOBAL STYLES --- */
      body {
        font-family: "Comic Sans MS", "Arial", sans-serif;
        background-color: #ffe6e6;
        margin: 0;
        padding: 0;
        height: 100vh;
        width: 100vw;
        overflow: hidden;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      /* --- PAGE STRUCTURE --- */
      .page {
        display: none;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 1; /* Behind the curtains */
      }

      #page-1 {
        display: flex;
      }

      /* --- GLOBAL CURTAIN OVERLAY --- */
      #curtain-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none; /* Let clicks pass through when open */
        z-index: 9999;
        display: flex;
      }

      .curtain-panel {
        width: 50%;
        height: 100%;
        background-color: #b30000;
        background-image: repeating-linear-gradient(
          90deg,
          #b30000,
          #b30000 30px,
          #8f0000 30px,
          #8f0000 60px
        );
        transition: transform 2s cubic-bezier(0.77, 0, 0.175, 1);
        position: relative;
        z-index: 2;
      }

      /* Initial State: Open */
      .panel-left {
        transform: translateX(-100%);
      }
      .panel-right {
        transform: translateX(100%);
      }

      /* Closed State */
      .curtains-closed .panel-left {
        transform: translateX(0);
      }
      .curtains-closed .panel-right {
        transform: translateX(0);
      }

      /* Intermission Text (Funny Part) */
      #intermission-text {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: white;
        font-size: 2rem;
        font-weight: bold;
        text-align: center;
        z-index: 3;
        opacity: 0;
        transition: opacity 0.3s;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        width: 100%;
      }

      .curtains-closed #intermission-text {
        opacity: 1;
        transition-delay: 0.4s; /* Wait for curtains to close before showing text */
      }

      /* --- PROPOSAL PAGE STYLES --- */
      .proposal-gif {
        width: 250px;
        height: 250px;
        object-fit: cover;
        border-radius: 20px;
        border: 5px solid white;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }

      h1 {
        color: #d63384;
        font-size: 2.5rem;
        text-align: center;
        margin: 10px;
      }

      .btn-box {
        margin-top: 20px;
        display: flex;
        gap: 20px;
        align-items: center;
        justify-content: center;
        height: 80px;
      }

      button {
        padding: 12px 30px;
        font-size: 1.2rem;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        font-weight: bold;
        transition: transform 0.2s;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      #yes-btn { background-color: #28a745; color: white; }
      #no-btn { background-color: #dc3545; color: white; }

      /* --- STORY PAGES STYLES --- */
      .memory-container {
        position: relative;
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        gap: 20px;
      }

      .center-photo {
        height: auto;
        width: auto;
        max-height: 75vh;
        max-width: 70vw;
        object-fit: contain;
        border: 8px solid white;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
      }

      .sprite-img {
        width: 100px;
        height: auto;
      }

      .nav-btn {
        background-color: #d63384;
        color: white;
        padding: 15px 20px;
        border-radius: 50px;
      }

      /* Bubble Styles */
      .sprite-wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .bubble {
        margin-bottom: 5px;
        background: white;
        padding: 10px 15px;
        border-radius: 15px;
        border: 2px solid #d63384;
        text-align: center;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        max-width: 200px;
      }

      /* --- FINAL PAGE --- */
      #page-final {
        flex-direction: column;
      }

      .gift-content {
        text-align: center;
        animation: popIn 1s ease;
      }

      @keyframes popIn {
        0% { transform: scale(0); opacity: 0; }
        80% { transform: scale(1.1); }
        100% { transform: scale(1); opacity: 1; }
      }

      .gift-img {
        max-width: 300px;
        border-radius: 15px;
        margin: 20px;
        box-shadow: 0 0 20px #ff69b4;
      }

      .final-sprite {
        margin-top: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
    </style>
  </head>
  <body>

    <div id="curtain-overlay">
      <div class="curtain-panel panel-left"></div>
      <div id="intermission-text"></div>
      <div class="curtain-panel panel-right"></div>
    </div>

    <div id="page-1" class="page">
      <img
        id="main-gif"
        class="proposal-gif"
        src="images/fa68fb77c89703a9b1e5862f89242ea1.gif"
        alt="Will you be my Valentine?"
      />
      <h1>Will you be my Valentine?</h1>
      <div class="btn-box">
        <button id="yes-btn" onclick="transitionToPage(2)">Yes</button>
        <button id="no-btn" onclick="handleNo()">No</button>
      </div>
    </div>

    <div id="page-2" class="page">
      <div class="memory-container">
        <img class="center-photo" src="images/ss1.png" alt="Memory 1" />
        <div class="sprite-wrapper">
          <div class="bubble">Remember this day?</div>
          <img class="sprite-img" src="images/shy.png" alt="Sprite" />
        </div>
      </div>
      <button class="nav-btn" onclick="transitionToPage(3)">Next &rarr;</button>
    </div>

    <div id="page-3" class="page">
      <div class="memory-container">
        <img class="center-photo" src="images/ss2.png" alt="Memory 2" />
        <div class="sprite-wrapper">
          <div class="bubble">"Yo" kill me</div>
          <img class="sprite-img" src="images/shock.png" alt="Sprite" />
        </div>
      </div>
      <button class="nav-btn" onclick="transitionToPage(4)">Next &rarr;</button>
    </div>

    <div id="page-4" class="page">
      <div class="memory-container">
        <img class="center-photo" src="images/ss3.png" alt="Memory 3" />
        <div class="sprite-wrapper">
          <div class="bubble">I love you Lin</div>
          <div class="bubble">Your words pushed me forward</div>
          <div class="bubble">(P.s. I won tho)</div>
          <img class="sprite-img" src="images/heart1.png" alt="Sprite" />
        </div>
      </div>
      <button class="nav-btn" onclick="transitionToPage(5)">Next &rarr;</button>
    </div>

    <div id="page-5" class="page">
      <div class="memory-container">
        <img class="center-photo" src="images/ss4.png" alt="Memory 4" />
        <div class="sprite-wrapper">
          <div class="bubble">you had so much excitement and enthusiasm</div>
          <img class="sprite-img" src="images/heart2.png" alt="Sprite" />
        </div>
      </div>
      <button class="nav-btn" onclick="transitionToPage(6)">Next &rarr;</button>
    </div>

    <div id="page-6" class="page">
      <div class="memory-container">
        <img class="center-photo" src="images/ss5.png" alt="Memory 5" />
        <div class="sprite-wrapper">
          <div class="bubble">Copycat (I won again, heh)</div>
          <img class="sprite-img" src="images/heart3.png" alt="Sprite" />
        </div>
      </div>
      <button class="nav-btn" onclick="transitionToPage(7)">Next &rarr;</button>
    </div>

    <div id="page-7" class="page">
      <div class="memory-container">
        <img class="center-photo" src="images/ss6.png" alt="Memory 6" />
        <div class="sprite-wrapper">
          <div class="bubble">
            I lost this one....I'll get you again next week :mad:
          </div>
          <img class="sprite-img" src="images/heart4.png" alt="Sprite" />
        </div>
      </div>
      <button class="nav-btn" onclick="transitionToPage('final')">
        One last surprise &rarr;
      </button>
    </div>

    <div id="page-final" class="page">
      <div class="gift-content" id="gift-box">
        <h1>Surprise!!!</h1>
        <h1>Happy Valentine's Day My Love! ❤️</h1>
        <img class="gift-img" src="images/apple.jpg" alt="Gift" />
        <h2>Code: X34LWRJ6Z45GYJVC</h2>
      </div>

      <div class="final-sprite" id="final-sprite">
        <div class="bubble">It was supposed to be 25$ but my friend got the 20$ one...</div>
        <img class="sprite-img" src="images/sad.png" alt="Sprite" />
      </div>
    </div>

    <script>
      // === CONFIGURATION ===
      const sadGifUrl = "https://i.pinimg.com/originals/fa/68/fb/fa68fb77c89703a9b1e5862f89242ea1.gif";
      
      // Funny texts to show while curtains are closed
      const intermissionMessages = [
        "Boom",
        "Kaboom",
        "Boom Shakalaka",
        "Booty",
        "lovely day we're having",
        "Dramatic noises",
      ];

      let noCount = 0;

      function handleNo() {
        const noBtn = document.getElementById("no-btn");
        const yesBtn = document.getElementById("yes-btn");
        const gif = document.getElementById("main-gif");

        gif.src = sadGifUrl;

        const phrases = ["Are you sure?", "Really?", "Pleease?", "Don't do this!", "Just click Yes!"];
        noBtn.innerText = phrases[Math.min(noCount, phrases.length - 1)];

        noCount++;
        let size = 1.2 + noCount * 0.4;
        yesBtn.style.transform = `scale(${size})`;
      }

      // --- THE NEW TRANSITION FUNCTION ---
      function transitionToPage(nextPageNum) {
        const overlay = document.getElementById('curtain-overlay');
        const textBox = document.getElementById('intermission-text');
        
        // 1. Pick a random funny message
        const randomMsg = intermissionMessages[Math.floor(Math.random() * intermissionMessages.length)];
        textBox.innerText = randomMsg;

        // 2. Close Curtains
        overlay.classList.add('curtains-closed');

        // 3. Wait for curtain to close (800ms match css)
        setTimeout(() => {
          // Hide all pages
          document.querySelectorAll(".page").forEach((p) => (p.style.display = "none"));

          // Show specific page
          if (nextPageNum === 'final') {
            document.getElementById("page-final").style.display = "flex";
          } else {
            document.getElementById("page-" + nextPageNum).style.display = "flex";
          }

          // 4. Open Curtains after a short delay to read text
          setTimeout(() => {
            overlay.classList.remove('curtains-closed');
          }, 600); 

        }, 2000);
      }
    </script>
  </body>
</html>